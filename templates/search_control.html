<div>
	<form id="search-form">
		<input id="serch-input" class="field ui-autocomplete-input ui-widget" 
			type="search" placeholder="{{translation['map.js.input.search.placeholder']}}" 
			autofocus="" autocomplete="off" name="q" ng-model="searchQuerry"
			ng-enter="searchInputEnter();"
			ng-keydown="searchKeyDown($event);">
		<input type="submit" id="search-button" value="" 
			style="background-image:url('{{HTML_ROOT + '/img/magnifier12w.png'}}');"
			class="button" ng-click="$broadcast('Search', searchQuerry);"/> 
	</form>
</div>
<div id="links">
	<a href="javascript:void(0);" ng-bind="translation['map.catalog']" ng-click="showCatalog = !showCatalog"></a>
	<a href="{{HTML_ROOT}}/{{lng}}/about.html" ng-bind="translation['map.aboutus']"></a>
	<a href="javascript:void(0);" ng-bind="translation['map.note']"></a>
</div>
<div ng-include="'templates/cathegories.html'"></div>
<div class="y-scroll" ng-style="{'max-height': (windowHeight - windowHeight * 0.15) + 'px'}" me-resize >
	<div id="serch-types" ng-show="searchResultsPage.matched_type">
		<ul>
			<li ng-repeat="f in searchResultsPage.matched_type" 
				ng-class="{'suggested': f.name == selectedSuggestion}" 
				class="search-result" >
				<input type="checkbox" ng-model="f.selected" ng-change=""></input>
				<span class="title" ng-show="f.translated_title" ng-click="">{{f.translated_title[0]}}</span>
			</li>
		</ul>
	</div>
	<div id="catalog" ng-show="!searchResultsPage.features && showCatalog">
		<ul id="cathegories-tree">
			<li ng-repeat="data in hierarchy.groups" ng-include="'PoiTreeItem.html'" ></li>
		</ul>
	</div>
	<div id="search-results" ng-show="searchResultsPage.features">
		<div id="not-strict-results-alert" ng-show="!searchResultsPage.strict">{{translation['map.js.search.result.not_strict']}}</div>
		<ul>
			<li ng-repeat="f in searchResultsPage.features" 
				ng-class="{'selected': f.feature_id == activeFeatureID, 'suggested': f.feature_id == selectedSuggestion}" 
				class="search-result" ng-click="selectRow(f);">
				<div class="title">{{formatSearchResultTitle(f)}}</div>
				<div class="address">{{formatSearchResultAddress(f)}}</div>
			</li>
		</ul>
		<div>
			<span>{{translation['map.js.search.result.pages']}}</span>
			<span class="page-number" ng-class="{current:pn.active}" 
				ng-repeat="pn in srPages" ng-click="goPage(pn)">{{pn.p}}</span>
		</div>
	</div>
</div>

<script type="text/ng-template"  id="PoiTreeItem.html">
	<input type="checkbox" ng-model="data.selected" ng-change="selectCathegory(data, 'groups')"></input>
	<a ng-click="expand(data);" ng-show="(data.groups.length!=0 || data.features.length!=0)" >
		<img class="expand" src="{{HTML_ROOT}}/img/expanded.png" ng-show="data.expanded"></img>
		<img class="expand" src="{{HTML_ROOT}}/img/expand.png" ng-show="!data.expanded"></img>
	</a>
    <a ng-click="expand(data);" 
		ng-class="{'not-empty':(data.groups.length!=0 || data.features.length!=0)}">
		{{data.title}}
	</a>
    <ul ng-show="data.expanded">
        <li ng-repeat="data in data.groups"			 
			ng-include="'PoiTreeItem.html'"></li>
		<li class="feature" ng-repeat="feature in data.features">
			<input type="checkbox" ng-model="feature.selected" ng-change="selectCathegory(feature, 'features');"></input>
			<a ng-click="feature.selected = !!!feature.selected; selectCathegory(feature, 'features');">{{feature.translated_title}}</a>
		</li>
    </ul>
</script>